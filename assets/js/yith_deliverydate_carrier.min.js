jQuery(document).ready(function(t){var e=t("#_ywcdd_workday").select2(),i=(t(".yith_dayworkselect").select2(),function(){t(".yith_timeslot_all_day").on("click",function(e){e.preventDefault();var i=t(this).parents(".yith_single_multiworkday");timeselectday=i.find("select.yith_dayworkselect").select2(),timeselectday.val(["sun","mon","tue","wed","thu","fri","sat"]).trigger("change")}),t(".yith_timeslot_clear").on("click",function(e){e.preventDefault();var i=t(this).parents(".yith_single_multiworkday"),a=i.find("select.yith_dayworkselect").select2();a.val(null).trigger("change")})});t(".yith_select_all_day").on("click",function(t){t.preventDefault(),e.val(["sun","mon","tue","wed","thu","fri","sat"]).trigger("change")}),t(".yith_select_clear").on("click",function(t){t.preventDefault(),e.val(null).trigger("change")});var a=function(){t(".yith_timepicker").timepicker({timeFormat:yith_delivery_parmas.timeformat})},r=function(){t("#yith_timepicker_from").val(""),t("#yith_timepicker_to").val(""),t("#yith_max_tot_order").val(""),t("#yith_fee").val("")};a();var n=t(".ywcdd_carrier_table"),_=(n.find("#the-list"),{message:null,overlayCSS:{background:"#fff",opacity:.6},ignoreIfBlocked:!0});t("#yith_add_time_slot").on("click",function(e){e.preventDefault();var d=t("#yith_timepicker_from").val(),y=t("#yith_timepicker_to").val(),s=t("#yith_max_tot_order").val(),h=t("#yith_fee").val(),m=t("#yith_carrier_id").val(),f=t("#yith_metakey").val();if(""!=d&&""!=y){var u={ywcdd_time_from:d,ywcdd_time_to:y,ywcdd_max_order:s,ywcdd_fee:h,ywcdd_post_id:m,ywcdd_metakey:f,action:yith_delivery_parmas.actions.add_carrier_time_slot};n.block(_),t.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:u,dataType:"json",success:function(t){n.unblock(),n.find(".no-items").hide(),rows=n.find("#the-list>tr").not(".no-items").get(),rows.length>0?n.find("#the-list>tr:last-child").not(".no-items").after(t.template):n.find(".no-items").after(t.template),n.find("select.yith_dayworkselect").select2(),a(),i(),o(),l(),c(),r()}})}});var d=function(){var e=n.find("a.yith_update_time_slot"),i=n.find("a.yith_delete_time_slot");e.each(function(e){t(this).data("item_id",e)}),i.each(function(e){t(this).data("item_id",e)})},l=function(){update_button=n.find(".yith_update_time_slot"),update_button.on("click",function(e){e.preventDefault();var i=t(this).parents("tr"),a=i.find(".timepicker_timefrom").val(),r=i.find(".timepicker_timeto").val(),d=i.find(".yith_max_order").val(),l=i.find(".yith_fee").val(),c=i.find(".yith_override_day").is(":checked")?"yes":"no",o=i.find(".yith_dayworkselect").select2("val"),y=t(this).data("item_id"),s=t("#yith_carrier_id").val(),h=t("#yith_metakey").val();if(""!=a&&""!=r){n.block(_);var m={ywcdd_time_from:a,ywcdd_time_to:r,ywcdd_max_order:d,ywcdd_fee:l,ywcdd_day:o,ywcdd_carrier_id:s,ywcdd_metakey:h,override_days:c,item_id:y,action:yith_delivery_parmas.actions.update_carrier_time_slot};t.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:m,dataType:"json",success:function(t){n.unblock()}})}})},c=function(){delete_button=n.find(".yith_delete_time_slot"),delete_button.on("click",function(e){e.preventDefault();var i=t(this).parents("tr"),a=t(this).data("item_id"),r=t("#the-list"),l=t("#yith_carrier_id").val(),c=t("#yith_metakey").val(),o={item_id:a,ywcdd_carrier_id:l,ywcdd_metakey:c,action:yith_delivery_parmas.actions.delete_carrier_time_slot};n.block(_),t.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:o,dataType:"json",success:function(t){i.remove(),0==r.find("tr").length&&r.html(yith_delivery_parmas.empty_row),d(),n.unblock()}})})};l(),c();var o=function(){t(".yith_override_day").on("change",function(e){var i=t(this),a=i.parents("tr").find(".yith_single_multiworkday"),r=i.parents("tr").find(".yith_over_day");i.is(":checked")?(a.show("slow"),r.val("yes")):(a.hide("slow"),r.val("no"))}).trigger("change")};o(),t(document).on("click",".yith_timeslot_all_day",function(e){e.preventDefault();var i=t(this),a=i.parents("tr").find(".yith_dayworkselect");a.val(["sun","mon","tue","wed","thu","fri","sat"]).trigger("change")}),t(document).on("click",".yith_timeslot_clear",function(e){e.preventDefault();var i=t(this),a=i.parents("tr").find(".yith_dayworkselect");a.val(null).trigger("change")})});