jQuery(document).ready(function(t){var e=function(t){t.length&&t.removeClass("ywcdd_block")},a=function(t){t.length&&t.addClass("ywcdd_block")};t("#yith_delivery_date_panel_general-settings").on("change","",function(i){var d=t("#yith_delivery_date_enable_carrier_system"),n=t("#yith_delivery_date_range_day").parents("tr"),r=t("#yith_delivery_date_workday").parents("tr"),_=t("#yith_delivery_date_max_range").parents("tr");t("#yith_wcdd_panel_timeslot");d.is(":checked")?(a(n),a(r),a(_)):(e(n),e(r),e(_))}).trigger("change");var i=t("#yith_delivery_date_workday").select2();t(".yith_select_all_day").on("click",function(t){t.preventDefault(),i.val(["sun","mon","tue","wed","thu","fri","sat"]).trigger("change")}),t(".yith_select_clear").on("click",function(t){t.preventDefault(),i.val(null).trigger("change")});var d=(t("#yith_add_slot"),t("#yith_delivery_date_panel_general-settings"),t(".wp-list-table.timeslots")),n={message:null,overlayCSS:{background:"#fff",opacity:.6},ignoreIfBlocked:!0},r=function(){t(".yith_timepicker").timepicker({timeFormat:yith_delivery_parmas.timeformat})};r();var _=function(){var e=d.find("a.yith_update_time_slot"),a=d.find("a.yith_delete_time_slot");e.each(function(e){t(this).data("item_id",e)}),a.each(function(e){t(this).data("item_id",e)})},c=function(){update_button=d.find(".yith_update_time_slot"),update_button.on("click",function(e){e.preventDefault();var a=t(this).parents("tr"),i=a.find(".timepicker_timefrom").val(),r=a.find(".timepicker_timeto").val(),_=a.find(".yith_max_order").val(),c=a.find(".yith_fee").val(),o=a.find(".yith_override_day").is(":checked")?"yes":"no",l=a.find(".yith_dayworkselect").select2("val"),y=t(this).data("item_id");if(""!=i&&""!=r){var s={ywcdd_time_from:i,ywcdd_time_to:r,ywcdd_max_order:_,ywcdd_fee:c,ywcdd_day:l,override_days:o,item_id:y,slot_action:"update_slot",action:yith_delivery_parmas.actions.update_time_slot,plugin_nonce:yith_delivery_parmas.plugin_nonce};d.block(n),t.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:s,dataType:"json",success:function(t){d.unblock()}})}})},o=function(){delete_button=d.find(".yith_delete_time_slot"),delete_button.on("click",function(e){e.preventDefault();var a=t(this).parents("tr"),i=t(this).data("item_id"),r=t("#the-list"),c={item_id:i,action:yith_delivery_parmas.actions.delete_time_slot,slot_action:"delete_slot",plugin_nonce:yith_delivery_parmas.plugin_nonce};d.block(n),t.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:c,dataType:"json",success:function(t){d.unblock(),a.remove(),0==r.find("tr").length&&r.html(yith_delivery_parmas.empty_row),_()}})})};c(),o();var l=function(e){if(table=t(".shippingcategorydays"),category_id=t(e).find(".ywcdd_category").val(),category_day=t(e).find(".ywcdd_category_day").val(),""!=category_id&&""!=category_day){var a={ywcdd_category_id:category_id,ywcdd_category_day:category_day,action:yith_delivery_parmas.actions.update_category_day,plugin_nonce:yith_delivery_parmas.plugin_nonce};table.block(n),t.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:a,dataType:"json",success:function(e){t(".shippingcategorydays").unblock()}})}},y=function(){t(".yith_update_category_day").on("click",function(e){e.preventDefault();var a=t(this).parents("tr");l(a)})},s=function(){t(".yith_delete_category_day").on("click",function(e){e.preventDefault();var a=t(this).parents("tr"),i=t(this).data("item_id"),d=t(".shippingcategorydays>#the-list"),r={item_id:i,action:yith_delivery_parmas.actions.delete_category_day,plugin_nonce:yith_delivery_parmas.plugin_nonce};d.block(n),t.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:r,dataType:"json",success:function(t){d.unblock(),a.remove(),0==d.find("tr").length&&d.html(yith_delivery_parmas.empty_row)}})})},u=function(e){if(table=t(".shippingproductdays"),product_id=t(e).find(".ywcdd_product").val(),product_day=t(e).find(".ywcdd_product_day").val(),""!=product_id&&""!=product_day){var a={ywcdd_product_id:product_id,ywcdd_product_day:product_day,action:yith_delivery_parmas.actions.update_product_day,plugin_nonce:yith_delivery_parmas.plugin_nonce};table.block(n),t.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:a,dataType:"json",success:function(t){table.unblock()}})}},p=function(){t(".yith_update_product_day").on("click",function(e){e.preventDefault();var a=t(this).parents("tr");u(a)})},h=function(){t(".yith_delete_product_day").on("click",function(e){e.preventDefault();var a=t(this).parents("tr"),i=t(this).data("item_id"),d=t(".shippingproductdays>#the-list"),r={item_id:i,action:yith_delivery_parmas.actions.delete_product_day,plugin_nonce:yith_delivery_parmas.plugin_nonce};a.block(n),t.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:r,dataType:"json",success:function(t){a.unblock(),a.remove(),0==d.find("tr").length&&d.html(yith_delivery_parmas.empty_row)}})})};y(),p(),s(),h();var v=function(){t(".yith_override_day").on("change",function(e){var a=t(this),i=a.parents("tr").find(".yith_single_multiworkday");a.is(":checked")?i.show("slow"):i.hide("slow")}).trigger("change")};v();var f=t("#the-list");f.on("click",".yith_add_time_slot",function(e){var a=t(e.target),i=a.closest("tr"),d=i.clone();d.find("div.yith_dayworkselect").remove();d.find("select.yith_dayworkselect").val(null).select2();d.find("input").val(""),i.after(d),r(),v()}),t(".yith-update-all").on("click",function(e){e.preventDefault();var a=t(".shippingcategorydays>#the-list").find("tr").not(".no-items"),i=t(".shippingproductdays>#the-list").find("tr").not(".no-items");t.each(a,function(t,e){l(e)}),t.each(i,function(t,e){u(e)})}),t(".yith-add-new-cat-day").on("click",function(e){var a=t('input[type="hidden"].yith-categories-select'),i=t(".ywcdd_day_cat"),d=!1;return""==a.val()&&(t("div.yith-categories-select").addClass("ywcdd_required_field"),d=!0),""==i.val()&&(i.addClass("ywcdd_required_field"),d=!0),d?(e.preventDefault(),!1):void 0}),t(".yith-add-new-prod-day").on("click",function(e){var a=t('input[type="hidden"].yith-products-select'),i=t(".ywcdd_day_prod"),d=!1;return""==a.val()&&(t("div.yith-products-select").addClass("ywcdd_required_field"),d=!0),""==i.val()&&(i.addClass("ywcdd_required_field"),d=!0),d?(e.preventDefault(),!1):void 0})});